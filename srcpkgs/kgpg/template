# Template file for 'kgpg'
pkgname=kgpg
version=23.08.5
revision=1
build_style=cmake
hostmakedepends="extra-cmake-modules gettext pkg-config
 qt5-qmake kcoreaddons5-devel kdoctools5 kconfig5"
makedepends="kwindowsystem5-devel kcrash5-devel kdbusaddons5-devel
 kiconthemes5-devel kjobwidgets5-devel kio5-devel
 kservice5-devel ktextwidgets5-devel kxmlgui5-devel
 kwidgetsaddons5-devel knotifications5-devel kdoctools5-devel
 akonadi-contacts-devel kcontacts5-devel"
depends="gnupg"
checkdepends="gnupg"
short_desc="Simple interface for GnuPG, a powerful encryption utility"
maintainer="Orphaned <orphan@voidlinux.org>"
license="GPL-2.0-only"
homepage="https://kde.org/applications/en/utilities/org.kde.kgpg"
changelog="https://kde.org/announcements/changelogs/gear/${version}/#kgpg"
distfiles="${KDE_SITE}/release-service/${version}/src/${pkgname}-${version}.tar.xz"
checksum=382c912394ee05409eb5bdf8961fc47a90dea45976e2a164fddced54c90b8592

do_check() {
	cd build

	# kgpg-{import,genkey,encrypt} tests fail randomly
	ctest -E "kgpg-(import|genkey|encrypt)"
}
