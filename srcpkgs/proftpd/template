# Template file for 'proftpd'
pkgname=proftpd
version=1.3.8a
revision=1
build_style=gnu-configure
make_check_target=check-api
makedepends="libcap-devel"
checkdepends="check-devel iana-etc"
# Full test suite is quite long and depends on a few unpackages perl libs
# perl-Test-Unit perl-HTTP-Message perl-LWP perl-Net-Address-IP-Local"
short_desc="Highly configurable GPL-licensed FTP server software"
maintainer="John <me@johnnynator.dev>"
license="GPL-3.0-or-later"
homepage="http://www.proftpd.org/"
changelog="https://github.com/proftpd/proftpd/blob/${version}/RELEASE_NOTES"
distfiles="https://github.com/proftpd/proftpd/archive/v${version}.tar.gz"
checksum=56093b890a712220b09b98e29de2974a590e8fae6b36ed78c698a90945466aaf
conf_files="/etc/proftpd.conf"

if [ "$XBPS_CHECK_PKGS" ]; then
	configure_args="--enable-tests"
fi

proftpd-devel_package() {
	short_desc+=" - development files"
	depends="proftpd>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
	}
}
